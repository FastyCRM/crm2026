# ADM — Административная панель CRM2026

## Назначение
Папка `/adm` содержит **shell административной панели CRM2026**.

Админка отвечает за:
- роутинг административной части
- отображение layout (sidebar, topbar, main)
- подключение модулей
- сбор меню из модулей
- применение тем оформления
- UX-логику (guest / auth режимы)

Админка **НЕ содержит бизнес-логики** и **НЕ работает напрямую с БД модулей**.

---

## Основные принципы
- `declare(strict_types=1);` во всех PHP-файлах
- функциональный подход (без ООП)
- абсолютные пути (`ROOT_PATH`)
- единая точка входа `/adm/index.php`
- админка — оболочка, модули — содержимое

---

## Структура

/adm/
│
├── index.php # Shell админки, роутинг
├── assets/
│ ├── css/
│ │ ├── main.css # CSS-переменные, reset, темы
│ │ └── adm.css # Layout админки
│ ├── js/
│ │ ├── main.js
│ │ └── adm.js
│ └── vendor/
│ └── bootstrap-icons/ # Иконочный шрифт
│
└── README.md


---

## Роутинг
Используются GET-параметры:
- `m` — код модуля
- `a` — действие (handler)

Примеры:

/adm/index.php?m=dashboard
/adm/index.php?m=auth&a=logout


---

## Режимы работы

### Guest
- пользователь не авторизован
- доступен только модуль `auth`
- sidebar и topbar не отображаются
- контент центрируется по экрану

### Auth
- пользователь авторизован
- доступ к модулям по ролям
- отображается sidebar и topbar
- внизу sidebar: выбор темы и кнопка выхода

---

## Меню
Меню формируется **автоматически** из модулей:

/modules/*/settings.php


Фильтрация:
- `enabled = 1`
- `menu = 1`
- проверка `roles`
- сортировка по `sort`

---

## Темы оформления
Поддерживаемые темы:
- `light`
- `dark`
- `color`

Особенности:
- тема хранится индивидуально у пользователя (БД)
- применяется через `<html data-theme="">`
- все цвета задаются через CSS-переменные

---

## Иконки
Используются **Bootstrap Icons (webfont)**.

Иконки:
- задаются в `settings.php` модуля
- цвет зависит от темы и `icon_group`
- SVG не используется

---

## Ограничения
Админка НЕ должна:
- содержать бизнес-логику
- обращаться к таблицам модулей
- знать внутреннюю структуру модулей
- использовать ООП